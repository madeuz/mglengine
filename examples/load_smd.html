<!DOCTYPE html><html>	<head>		<title>MglEngine Test</title>				<meta charset="utf-8" />				<script type="text/javascript" src="../lib/mgl/core/Mgl.js"></script>		<script type="text/javascript" src="../lib/mgl/core/Console.js"></script>		<script type="text/javascript" src="../lib/mgl/core/ResourceManager.js"></script>				<script type="text/javascript" src="../lib/mgl/core/Event.js"></script>		<script type="text/javascript" src="../lib/mgl/core/Observable.js"></script>		<script type="text/javascript" src="../lib/mgl/core/Loader.js"></script>		<script type="text/javascript" src="../lib/mgl/core/Renderer.js"></script>		<script type="text/javascript" src="../lib/mgl/core/Shader.js"></script>		<script type="text/javascript" src="../lib/mgl/core/Texture2D.js"></script>				<script type="text/javascript" src="../lib/mgl/drawables/Drawable.js"></script>		<script type="text/javascript" src="../lib/mgl/drawables/Scene.js"></script>		<script type="text/javascript" src="../lib/mgl/drawables/Camera.js"></script>		<script type="text/javascript" src="../lib/mgl/drawables/Geometry.js"></script>		<script type="text/javascript" src="../lib/mgl/drawables/Mesh.js"></script>		<script type="text/javascript" src="../lib/mgl/drawables/SkeletalMesh.js"></script>		<script type="text/javascript" src="../lib/mgl/drawables/Terrain.js"></script>		<script type="text/javascript" src="../lib/mgl/drawables/TiledTerrain.js"></script>				<script type="text/javascript" src="../lib/mgl/readers/ObjReader.js"></script>		<script type="text/javascript" src="../lib/mgl/readers/SmdReader.js"></script>		<script type="text/javascript" src="../lib/mgl/readers/DataView.js"></script>		<script type="text/javascript" src="../lib/mgl/readers/PskReader.js"></script>				<script type="text/javascript" src="../lib/mgl/utils/Color.js"></script>		<script type="text/javascript" src="../lib/mgl/utils/Math.js"></script>		<script type="text/javascript" src="../lib/mgl/utils/Vec3.js"></script>		<script type="text/javascript" src="../lib/mgl/utils/Mat3.js"></script>		<script type="text/javascript" src="../lib/mgl/utils/Mat4.js"></script>		<script type="text/javascript" src="../lib/mgl/utils/Quat4.js"></script>				<script type="text/javascript">			window.onload = function(){				var canvas = document.getElementsByTagName('canvas')[0];				var camera = new mgl.Camera({aspect: canvas.width / canvas.height});				var scene = new mgl.Scene({camera: camera, background: new mgl.Color('silver')});				var renderer = new mgl.Renderer(canvas);				renderer.setScene(scene);								var ticks = 0;				renderer.afterDraw = function(){ticks++};				setInterval(function(){document.getElementById('fps').innerHTML = ticks+' fps';ticks=0;}, 1000);								renderer.animate();								mgl.shaderPath = '../shaders/';								var dwarfParts = [					{mesh: 'FDwarf_m000_b', texture: 'FDwarf_m000_t1000_b'},					{mesh: 'FDwarf_m000_l', texture: 'FDwarf_m000_t1000_l'},					{mesh: 'FDwarf_m000_u', texture: 'FDwarf_m000_t1000_u'},					{mesh: 'FDwarf_m000_g', texture: 'FDwarf_m000_t1000_g'},					{mesh: 'FDwarf_m000_f', texture: 'FDwarf_m000_t00_f'},					{mesh: 'FDwarf_m000_m00_ah', texture: 'FDwarf_m000_t00_m00_ah'},					{mesh: 'FDwarf_m000_m00_bh', texture: 'FDwarf_m000_t00_m00_bh'}				];								var parts = {};				var numLoaded = 0;												var loadDwarfPart = function(part){													var loader = new mgl.Loader();					loader.on('load', function(data){						var reader = new mgl.SmdReader(data);												var obj = new mgl.Mesh();						obj.vertices = reader.vertices;						obj.normals = reader.normals;						obj.texCoords = reader.texCoords;						obj.indices = reader.indices;																		obj.ambientColor = new mgl.Color('020202');						obj.lightingDirection = vec3.create([0.0, 0.0, 1.0]);						obj.directionalColor = new mgl.Color('ffffff');						obj.textureUrl = 'assets/smd-fdwarf/'+part.texture+'.png';						obj.translate([0.0, -20.0, -60.0]);						obj.rotateX(-Math.PI/2);												numLoaded++;						parts[part.mesh] = obj;						if(numLoaded == dwarfParts.length){																			for(var dPart in dwarfParts){								var mPart = parts[dwarfParts[dPart].mesh];																								scene.add(mPart);							}															var rotateParts = function(){								for(var mPart in dwarfParts){									var partn = parts[dwarfParts[mPart].mesh];									partn.rotateZ(Math.PI/180.0);								}								setTimeout(rotateParts, 10);							}							rotateParts();						}					});					loader.loadTextFile('assets/smd-fdwarf/'+part.mesh+'.smd');				}								for(var part in dwarfParts){					loadDwarfPart(dwarfParts[part]);				}			}		</script>	</head>	<body>		<span id="fps" style="float:right;">0.0fps</span>		<canvas width="800" height="600"></canvas>	</body></html>